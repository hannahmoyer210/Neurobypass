---
title: "prevelance"
output: word_document

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```


```{r pfs_mas, echo=FALSE, results='hide', warning=FALSE, include=FALSE}
library(readr)
library(ggplot2)
library(meta)
library(forestplot)
library(stringr)
library(readxl)
library(tidyverse)
library(rstatix)

```


```{r, echo=FALSE, message = FALSE, warning=FALSE, include=FALSE}
#for prevalance table 
neurobypass <- read_excel("cleanforcoding.xlsx")

#total overall
Totalcount <-nrow(neurobypass)

Totalpreceededsubset<-subset(neurobypass, preceeded == "1")
Totalambigioussubset<-subset(neurobypass, Ambigious == "1")
Totalbypasssubset<-subset(neurobypass, Truebypass == "1")
  
Totalpreceededcount<-nrow(Totalpreceededsubset)
Totalambigiouscount<-nrow(Totalambigioussubset)
Totalbypasscount<-nrow(Totalbypasssubset)

Totalpreceededpercent <- (divide_by(Totalpreceededcount,Totalcount))*100
Totalambigiouspercent <- (divide_by(Totalambigiouscount,Totalcount))*100
Totalbypasspercent <- (divide_by(Totalbypasscount,Totalcount))*100

#subsets
ADsubset <- subset(neurobypass, indication == "AD")
PDsubset <- subset(neurobypass, indication == "PD")
ALSsubset <- subset(neurobypass, indication == "ALS")
HDsubset <- subset(neurobypass, indication == "Huntingtons")
MSsubset <- subset(neurobypass, indication == "MS")
Migrainesubset <- subset(neurobypass, indication == "Migrane")
Headachesubset <- subset(neurobypass, indication == "Headache")
Epilepsysubset <- subset(neurobypass, indication == "Epilepsy")
TBIsubset <- subset(neurobypass, indication == "TBI")
Strokesubset <- subset(neurobypass, indication == "Stroke")

#totalcount
ADcount <- nrow(ADsubset)
PDcount <- nrow(PDsubset)
ALScount <- nrow(ALSsubset)
HDcount <- nrow(HDsubset)
MScount <- nrow(MSsubset)
Migrainecount <- nrow(Migrainesubset)
Headachecount <- nrow(Headachesubset)
Epilepsycount <- nrow(Epilepsysubset)
TBIcount <- nrow(TBIsubset)
Strokecount <- nrow(Strokesubset)

#precededsubset
ADpreceeded <- subset(ADsubset, preceeded == "1")
PDpreceeded<- subset(PDsubset, preceeded == "1")
ALSpreceeded <- subset(ALSsubset, preceeded == "1")
HDpreceeded <- subset(HDsubset, preceeded == "1")
MSpreceeded <- subset(MSsubset, preceeded == "1")
Migrainepreceeded <- subset(Migrainesubset, preceeded == "1")
Headachepreceeded <- subset(Headachesubset, preceeded == "1")
Epilepsypreceeded <- subset(Epilepsysubset, preceeded == "1")
TBIpreceeded <- subset(TBIsubset, preceeded == "1")
Strokepreceeded <- subset(Strokesubset, preceeded == "1")

#precededcount
ADpreceededcount <- nrow(ADpreceeded)
PDpreceededcount <- nrow(PDpreceeded)
ALSpreceededcount <- nrow(ALSpreceeded)
HDpreceededcount <- nrow(HDpreceeded)
MSpreceededcount <- nrow(MSpreceeded)
Migrainepreceededcount <- nrow(Migrainepreceeded)
Headachepreceededcount <- nrow(Headachepreceeded)
Epilepsypreceededcount <- nrow(Epilepsypreceeded)
TBIpreceededcount <- nrow(TBIpreceeded)
Strokepreceededcount <- nrow(Strokepreceeded)

#precededpercent
ADpcdpercent <- (divide_by(ADpreceededcount,ADcount))*100
PDpcdpercent <- (divide_by(PDpreceededcount,PDcount))*100
ALSpcdpercent <- (divide_by(ALSpreceededcount,ALScount))*100
HDpcdpercent <- (divide_by(HDpreceededcount,HDcount))*100
MSpcdpercent <- (divide_by(MSpreceededcount,MScount))*100
Migrainepcdpercent <-(divide_by(Migrainepreceededcount,Migrainecount))*100
Headachepcdpercent <- (divide_by(Headachepreceededcount,Headachecount))*100
Epilepsypcdpercent <- (divide_by(Epilepsypreceededcount,Epilepsycount))*100
TBIpcdpercent <- (divide_by(TBIpreceededcount,TBIcount))*100
Strokepcdpercent <- (divide_by(Strokepreceededcount,Strokecount))*100
#bypass is opposite percent

#ambig
ADpreceededambi <- subset(ADsubset, Ambigious == "1")
PDpreceededambi<- subset(PDsubset, Ambigious == "1")
ALSpreceededambi <- subset(ALSsubset, Ambigious == "1")
HDpreceededambi <- subset(HDsubset, Ambigious == "1")
MSpreceededambi <- subset(MSsubset, Ambigious == "1")
Migrainepreceededambi <- subset(Migrainesubset, Ambigious == "1")
Headachepreceededambi <- subset(Headachesubset, Ambigious == "1")
Epilepsypreceededambi <- subset(Epilepsysubset, Ambigious == "1")
TBIpreceededambi <- subset(TBIsubset, Ambigious == "1")
Strokepreceededambi <- subset(Strokesubset, Ambigious == "1")

#precededambicount
ADpreceededcountambi <- nrow(ADpreceededambi)
PDpreceededcountambi <- nrow(PDpreceededambi)
ALSpreceededcountambi <- nrow(ALSpreceededambi)
HDpreceededcountambi <- nrow(HDpreceededambi)
MSpreceededcountambi <- nrow(MSpreceededambi)
Migrainepreceededcountambi <- nrow(Migrainepreceededambi)
Headachepreceededcountambi <- nrow(Headachepreceededambi)
Epilepsypreceededcountambi <- nrow(Epilepsypreceededambi)
TBIpreceededcountambi <- nrow(TBIpreceededambi)
Strokepreceededcountambi <- nrow(Strokepreceededambi)

#precededambipercent
ADpcdpercentambi <- (divide_by(ADpreceededcountambi,ADcount))*100
PDpcdpercentambi <- (divide_by(PDpreceededcountambi,PDcount))*100
ALSpcdpercentambi <- (divide_by(ALSpreceededcountambi,ALScount))*100
HDpcdpercentambi <- (divide_by(HDpreceededcountambi,HDcount))*100
MSpcdpercentambi <- (divide_by(MSpreceededcountambi,MScount))*100
Migrainepcdpercentambi <-(divide_by(Migrainepreceededcountambi,Migrainecount))*100
Headachepcdpercentambi <- (divide_by(Headachepreceededcountambi,Headachecount))*100
Epilepsypcdpercentambi <- (divide_by(Epilepsypreceededcountambi,Epilepsycount))*100
TBIpcdpercentambi <- (divide_by(TBIpreceededcountambi,TBIcount))*100
Strokepcdpercentambi <- (divide_by(Strokepreceededcountambi,Strokecount))*100

#Bypasstruenumber 
  
ADtruebpnumber <- (ADcount-(ADpreceededcountambi+ADpreceededcount))
PDtruebpnumber <- (PDcount-(PDpreceededcountambi+PDpreceededcount))
ALStruebpnumber <- (ALScount-(ALSpreceededcountambi+ALSpreceededcount))
HDtruebpnumber <- (HDcount-(HDpreceededcountambi+HDpreceededcount))
MStruebpnumber <- (MScount-(MSpreceededcountambi+MSpreceededcount))
Migrainetruebpnumber <- (Migrainecount-(Migrainepreceededcountambi+Migrainepreceededcount))
Headachetruebpnumber <- (Headachecount-(Headachepreceededcountambi+Headachepreceededcount))
Epilepsytruebpnumber <- (Epilepsycount-(Epilepsypreceededcountambi+Epilepsypreceededcount))
TBItruebpnumber <- (TBIcount-(TBIpreceededcountambi+TBIpreceededcount))
Stroketruebpnumber <- (Strokecount-(Strokepreceededcountambi+Strokepreceededcount))

#Bypasstruepercent 

ADtruebppercent <- (divide_by(ADtruebpnumber,ADcount))*100
PDtruebppercent <- (divide_by(PDtruebpnumber,PDcount))*100
ALStruebppercent <- (divide_by(ALStruebpnumber,ALScount))*100
HDtruebppercent <- (divide_by(HDtruebpnumber,HDcount))*100
MStruebpdpercent <- (divide_by(MStruebpnumber,MScount))*100
Migrainetruebppercent <- (divide_by(Migrainetruebpnumber,Migrainecount))*100
Headachetruebppercent <- (divide_by(Headachetruebpnumber,Headachecount))*100
Epilepsytruebppercent <- (divide_by(Epilepsytruebpnumber,Epilepsycount))*100
TBItruebppercent <- (divide_by(TBItruebpnumber,TBIcount))*100
Stroketruebppercent <- (divide_by(Stroketruebpnumber,Strokecount))*100

Indicationvector1<-c("All indications", "Alzheimer'ss disease","Parkinson's disease","Amyotrophic lateral sclerosis","Huntington's disease","Multiple sclerosis","Migraine","Headache","Epilepsy","TBI","Stroke")

NumberofTrials<- c(Totalcount, ADcount, PDcount, ALScount, HDcount, MScount, Migrainecount, Headachecount, Epilepsycount, TBIcount, Strokecount)

PreceededNumber<- c(Totalpreceededcount,ADpreceededcount,PDpreceededcount,ALSpreceededcount,HDpreceededcount,MSpreceededcount,Migrainepreceededcount,Headachepreceededcount,Epilepsypreceededcount,TBIpreceededcount, Strokepreceededcount)
PreceededRate<- c(Totalpreceededpercent, ADpcdpercent, PDpcdpercent, ALSpcdpercent, HDpcdpercent, MSpcdpercent, Migrainepcdpercent, Headachepcdpercent, Epilepsypcdpercent,TBIpcdpercent, Strokepcdpercent)

PreceededambiNumber <- c(Totalambigiouscount,ADpreceededcountambi,PDpreceededcountambi,ALSpreceededcountambi,HDpreceededcountambi,MSpreceededcountambi,Migrainepreceededcountambi,Headachepreceededcountambi,Epilepsypreceededcountambi,TBIpreceededcountambi,Strokepreceededcountambi)
PreceededambiRate <- c(Totalambigiouspercent,ADpcdpercentambi,PDpcdpercentambi,ALSpcdpercentambi,HDpcdpercentambi,MSpcdpercentambi,Migrainepcdpercentambi,Headachepcdpercentambi,Epilepsypcdpercentambi,TBIpcdpercentambi,Strokepcdpercentambi)

Bypasstruenumber <- c(Totalbypasscount,ADtruebpnumber, PDtruebpnumber, ALStruebpnumber, HDtruebpnumber, MStruebpnumber, Migrainetruebpnumber, Headachetruebpnumber, Epilepsytruebpnumber, TBItruebpnumber, Stroketruebpnumber)

Bypasstruepercent <- c(Totalbypasspercent, ADtruebppercent, PDtruebppercent, ALStruebppercent, HDtruebppercent, MStruebpdpercent,Migrainetruebppercent, Headachetruebppercent, Epilepsytruebppercent, TBItruebppercent, Stroketruebppercent)

prevelance <- data.frame(Indication=rep(Indicationvector1),
                 Number_of_P3_Trials=rep(NumberofTrials),
                 PreceededNumber=rep(PreceededNumber),
                 PreceededRate=rep(PreceededRate),
                 AmbigiousNumber=rep(PreceededambiNumber),
                 AmbigiousRate=rep(PreceededambiRate),
                 Bypasstruenumber=rep(Bypasstruenumber),
                 Bypasstruepercent=rep(Bypasstruepercent)
                 )

#view head of data 
view(prevelance)
write.table(prevelance)

```

```{r, echo=FALSE, message = FALSE, warning=FALSE, include=FALSE}
#for association table
#overall
OverallIndustrysubset <- subset(neurobypass, pharmafunding == "pharma")
OverallApprovedsubset <- subset(neurobypass, approva_status == "pre")


OverallIndustrynumber <- nrow(OverallIndustrysubset)
OverallApprovednumber <- nrow(OverallApprovedsubset)


OverallIndustrypercent <- (divide_by(OverallIndustrynumber,Totalcount))*100
OverallApprovedpercent <- (divide_by(OverallApprovednumber,Totalcount))*100

#proceeded
Procsubset<-subset(neurobypass,preceeded=="1")
Procnumber<-nrow(Procsubset)

ProcIndustrysubset <- subset(Procsubset, pharmafunding == "pharma")
ProcApprovedsubset <- subset(Procsubset, approva_status == "pre")


ProcIndustrynumber <- nrow(ProcIndustrysubset)
ProcApprovednumber <- nrow(ProcApprovedsubset)


ProcIndustrypercent <- (divide_by(ProcIndustrynumber,Procnumber))*100
ProcApprovedpercent <- (divide_by(ProcApprovednumber,Procnumber))*100


BroadBypass <-subset(neurobypass,preceeded =="0")
BroadBypassnumber <-nrow(BroadBypass)

BroadBypassIndustrysubset <- subset(BroadBypass, pharmafunding == "pharma")
BroadBypassApprovedsubset <- subset(BroadBypass, approva_status == "pre")


BroadBypassIndustrynumber <- nrow(BroadBypassIndustrysubset)
BroadBypassApprovednumber <- nrow(BroadBypassApprovedsubset)


BroadBypassIndustrypercent <- (divide_by(BroadBypassIndustrynumber,BroadBypassnumber))*100
BroadBypassApprovedpercent <- (divide_by(BroadBypassApprovednumber,BroadBypassnumber))*100


Names<-c("Pharma funded","Approved")
OverallNs<-c(OverallIndustrynumber,OverallApprovednumber)
Overallsecondaries<-c(OverallIndustrypercent,OverallApprovedpercent)
Proceededsecondaries<-c(ProcIndustrynumber,ProcApprovednumber)
Proceededsecondariespercent<-c(ProcIndustrypercent,ProcApprovedpercent)
Broadbypasssecondaries<-c(BroadBypassIndustrynumber,BroadBypassApprovednumber)
Broadbypasssecondariespercent<-c(BroadBypassIndustrypercent,BroadBypassApprovedpercent)

secondariestable <- data.frame(Secondary=rep(Names),
                AllN=rep(OverallNs),          
                All_percent=rep(Overallsecondaries),
                PrecededN=rep(Proceededsecondaries),
                Precededpercent=rep(Proceededsecondariespercent),
                BypassN=rep(Broadbypasssecondaries),
                Bypasspercent=rep(Broadbypasssecondariespercent)
                 )

print(secondariestable)
write.table(secondariestable)

```
 

```{r, echo=FALSE, message = FALSE, warning=FALSE, include=FALSE}
neurobypass <- read_excel("cleanforcoding.xlsx")
#for positivity

#AllP2STATUS
Overallpossubset <- subset(neurobypass, positivityofP3 == "Positive")
ADpossubset <- subset(ADsubset, positivityofP3 == "Positive")
PDpossubset <- subset(PDsubset, positivityofP3 == "Positive")
ALSpossubset <- subset(ALSsubset, positivityofP3 == "Positive")
HDpossubset <- subset(HDsubset, positivityofP3 == "Positive")
MSpossubset <- subset(MSsubset, positivityofP3 == "Positive")
Migrainepossubset <- subset(Migrainesubset, positivityofP3 == "Positive")
Headachepossubset <- subset(Headachesubset, positivityofP3 == "Positive")
Epilepsypossubset <- subset(Epilepsysubset, positivityofP3 == "Positive")
TBIpossubset <- subset(TBIsubset, positivityofP3 == "Positive")
Strokepossubset <- subset(Strokesubset, positivityofP3 == "Positive")

#poscount
Overallposcount <- nrow(Overallpossubset)
ADposcount <- nrow(ADpossubset)
PDposcount <- nrow(PDpossubset)
ALSposcount <- nrow(ALSpossubset)
HDposcount <- nrow(HDpossubset)
MSposcount <- nrow(MSpossubset)
Migraineposcount <- nrow(Migrainepossubset)
Headacheposcount <- nrow(Headachepossubset)
Epilepsyposcount <- nrow(Epilepsypossubset)
TBIposcount <- nrow(TBIpossubset)
Strokeposcount <- nrow(Strokepossubset)

#pospercent
Overallpospercent <- (divide_by(Overallposcount,Totalcount))*100
ADpospercent <- (divide_by(ADposcount,ADcount))*100
PDpospercent <- (divide_by(PDposcount,PDcount))*100
ALSpospercent <- (divide_by(ALSposcount,ALScount))*100
HDpospercent <- (divide_by(HDposcount,HDcount))*100
MSpospercent <- (divide_by(MSposcount,MScount))*100
Migrainepospercent <-(divide_by(Migraineposcount,Migrainecount))*100
Headachepospercent <- (divide_by(Headacheposcount,Headachecount))*100
Epilepsypospercent <- (divide_by(Epilepsyposcount,Epilepsycount))*100
TBIpospercent <- (divide_by(TBIposcount,TBIcount))*100
Strokepospercent <- (divide_by(Strokeposcount,Strokecount))*100

#PROCEEDED
#proceededpos
Overallpreceed <- subset(neurobypass, preceeded == "1")
ADpreceed <- subset(ADsubset, preceeded == "1")
PDpreceed<- subset(PDsubset, preceeded == "1")
ALSpreceed <- subset(ALSsubset, preceeded == "1")
HDpreceed <- subset(HDsubset, preceeded == "1")
MSpreceed <- subset(MSsubset, preceeded == "1")
Migrainepreceed <- subset(Migrainesubset, preceeded == "1")
Headachepreceed <- subset(Headachesubset, preceeded == "1")
Epilepsypreceed <- subset(Epilepsysubset, preceeded == "1")
TBIpreceed <- subset(TBIsubset, preceeded == "1")
Strokepreceed <- subset(Strokesubset, preceeded == "1")

Overallpreceedcount <- nrow(Overallpreceed)
ADpreceedcount <- nrow(ADpreceed)
PDpreceedcount <- nrow(PDpreceed)
ALSpreceedcount <- nrow(ALSpreceed)
HDpreceedcount <- nrow(HDpreceed)
MSpreceedcount <- nrow(MSpreceed)
Migrainepreceedcount <- nrow(Migrainepreceed)
Headachepreceedcount <- nrow(Headachepreceed)
Epilepsypreceedcount <- nrow(Epilepsypreceed)
TBIpreceedcount <- nrow(TBIpreceed)
Strokepreceedcount <- nrow(Strokepreceed)

Overallprecedpos <- subset(Overallpreceed, positivityofP3 == "Positive")
ADprecedpos <- subset(ADpreceed, positivityofP3 == "Positive")
PDprecedpos<- subset(PDpreceed, positivityofP3 == "Positive")
ALSprecedpos <- subset(ALSpreceed, positivityofP3 == "Positive")
HDprecedpos <- subset(HDpreceed, positivityofP3 == "Positive")
MSprecedpos <- subset(MSpreceed, positivityofP3 == "Positive")
Migraineprecedpos <- subset(Migrainepreceed, positivityofP3 == "Positive")
Headacheprecedpos <- subset(Headachepreceed, positivityofP3 == "Positive")
Epilepsyprecedpos <- subset(Epilepsypreceed, positivityofP3 == "Positive")
TBIprecedpos <- subset(TBIpreceed, positivityofP3 == "Positive")
Strokeprecedpos <- subset(Strokepreceed, positivityofP3 == "Positive")

Overallprecposnumber <-nrow(Overallprecedpos)
ADprecposnumber <- nrow(ADprecedpos)
PDprecposnumber <- nrow(PDprecedpos)
ALSprecposnumber  <- nrow(ALSprecedpos)
HDprecposnumber  <- nrow(HDprecedpos)
MSprecposnumber  <- nrow(MSprecedpos)
Migraineprecposnumber  <- nrow(Migraineprecedpos)
Headacheprecposnumber  <- nrow(Headacheprecedpos)
Epilepsyprecposnumber  <- nrow(Epilepsyprecedpos)
TBIprecposnumber  <- nrow(TBIprecedpos)
Strokeprecposnumber  <- nrow(Strokeprecedpos)

Overallprecedpospercent <- (divide_by(Overallprecposnumber,Overallpreceedcount))*100
ADprecedpospercent <- (divide_by(ADprecposnumber,ADpreceedcount))*100
PDprecedpospercent <- (divide_by(PDprecposnumber,PDpreceedcount))*100
ALSprecedpospercent  <- (divide_by(ALSprecposnumber,ALSpreceedcount))*100
HDprecedpospercent <- (divide_by(HDprecposnumber,HDpreceedcount))*100
MSprecedpospercent <- (divide_by(MSprecposnumber,MSpreceedcount))*100
Migraineprecedpospercent <- (divide_by(Migraineprecposnumber,Migrainepreceedcount))*100
Headacheprecedpospercent <- (divide_by(Headacheprecposnumber,Headachepreceedcount))*100
Epilepsyprecedpospercent <- (divide_by(Epilepsyprecposnumber,Epilepsypreceedcount))*100
TBIprecedpospercent <- (divide_by(TBIprecposnumber,TBIpreceedcount))*100
Strokeprecedpospercent  <- (divide_by(Strokeprecposnumber,Strokepreceedcount))*100

#BYPASS
Overallbypassandambi <- subset(neurobypass, preceeded == "0")
ADbypassandambi <- subset(ADsubset, preceeded == "0")
PDbypassandambi<- subset(PDsubset, preceeded == "0")
ALSbypassandambi <- subset(ALSsubset, preceeded == "0")
HDbypassandambi <- subset(HDsubset, preceeded== "0")
MSbypassandambi <- subset(MSsubset, preceeded == "0")
Migrainebypassandambi <- subset(Migrainesubset, preceeded == "0")
Headachebypassandambi <- subset(Headachesubset, preceeded == "0")
Epilepsybypassandambi <- subset(Epilepsysubset, preceeded == "0")
TBIbypassandambi <- subset(TBIsubset, preceeded == "0")
Strokebypassandambi <- subset(Strokesubset, preceeded == "0")

Overallbypassandambicount<- nrow(Overallbypassandambi)
ADbypassandambicount <- nrow(ADbypassandambi)
PDbypassandambicount <- nrow(PDbypassandambi)
ALSbypassandambicount <- nrow(ALSbypassandambi)
HDbypassandambicount <- nrow(HDbypassandambi)
MSbypassandambicount <- nrow(MSbypassandambi)
Migrainebypassandambicount <- nrow(Migrainebypassandambi)
Headachebypassandambicount <- nrow(Headachebypassandambi)
Epilepsybypassandambicount <- nrow(Epilepsybypassandambi)
TBIbypassandambicount <- nrow(TBIbypassandambi)
Strokebypassandambicount <- nrow(Strokebypassandambi)

Overallbypasspos <- subset(Overallbypassandambi, positivityofP3 == "Positive")
ADbypasspos <- subset(ADbypassandambi, positivityofP3 == "Positive")
PDbypasspos<- subset(PDbypassandambi, positivityofP3 == "Positive")
ALSbypasspos <- subset(ALSbypassandambi, positivityofP3 == "Positive")
HDbypasspos <- subset(HDbypassandambi, positivityofP3 == "Positive")
MSbypasspos <- subset(MSbypassandambi, positivityofP3 == "Positive")
Migrainebypasspos <- subset(Migrainebypassandambi, positivityofP3 == "Positive")
Headachebypasspos <- subset(Headachebypassandambi, positivityofP3 == "Positive")
Epilepsybypasspos <- subset(Epilepsybypassandambi, positivityofP3 == "Positive")
TBIbypasspos <- subset(TBIbypassandambi, positivityofP3 == "Positive")
Strokebypasspos <- subset(Strokebypassandambi, positivityofP3 == "Positive")

Overallbypassposnumber <- nrow(Overallbypasspos)
ADbypassposnumber <- nrow(ADbypasspos)
PDbypassposnumber <- nrow(PDbypasspos)
ALSbypassposnumber  <- nrow(ALSbypasspos)
HDbypassposnumber  <- nrow(HDbypasspos)
MSbypassposnumber  <- nrow(MSbypasspos)
Migrainebypassposnumber  <- nrow(Migrainebypasspos)
Headachebypassposnumber  <- nrow(Headachebypasspos)
Epilepsybypassposnumber  <- nrow(Epilepsybypasspos)
TBIbypassposnumber  <- nrow(TBIbypasspos)
Strokebypassposnumber  <- nrow(Strokebypasspos)

Overallbypasspospercent <-(divide_by(Overallbypassposnumber,Overallbypassandambicount))*100
ADbypasspospercent <- (divide_by(ADbypassposnumber,ADbypassandambicount))*100
PDbypasspospercent <- (divide_by(PDbypassposnumber,PDbypassandambicount))*100
ALSbypasspospercent  <- (divide_by(ALSbypassposnumber,ALSbypassandambicount))*100
HDbypasspospercent <- (divide_by(HDbypassposnumber,HDbypassandambicount))*100
MSbypasspospercent <- (divide_by(MSbypassposnumber,MSbypassandambicount))*100
Migrainebypasspospercent <- (divide_by(Migrainebypassposnumber,Migrainebypassandambicount))*100
Headachebypasspospercent <- (divide_by(Headachebypassposnumber,Headachebypassandambicount))*100
Epilepsybypasspospercent <- (divide_by(Epilepsybypassposnumber,Epilepsybypassandambicount))*100
TBIbypasspospercent <- (divide_by(TBIbypassposnumber,TBIbypassandambicount))*100
Strokebypassposnumber  <- (divide_by(Strokebypassposnumber,Strokebypassandambicount))*100

#TERMINATION
#all indications term
Overalltermsubset <- subset(neurobypass, terminationcode == "1")
ADtermsubset <- subset(ADsubset, terminationcode == "1")
PDtermsubset <- subset(PDsubset,terminationcode == "1")
ALStermsubset <- subset(ALSsubset, terminationcode == "1")
HDtermsubset <- subset(HDsubset, terminationcode == "1")
MStermsubset <- subset(MSsubset, terminationcode == "1")
Migrainetermsubset <- subset(Migrainesubset, terminationcode == "1")
Headachetermsubset <- subset(Headachesubset, terminationcode == "1")
Epilepsytermsubset <- subset(Epilepsysubset, terminationcode == "1")
TBItermsubset <- subset(TBIsubset, terminationcode == "1")
Stroketermsubset <- subset(Strokesubset, terminationcode == "1")

#poscount
Overalltermcount <- nrow(Overalltermsubset)
ADtermcount <- nrow(ADtermsubset)


PDtermcount <- nrow(PDtermsubset)
ALStermcount <- nrow(ALStermsubset)
HDtermcount <- nrow(HDtermsubset)
MStermcount <- nrow(MStermsubset)
Migrainetermcount <- nrow(Migrainetermsubset)
Headachetermcount <- nrow(Headachetermsubset)
Epilepsytermcount <- nrow(Epilepsytermsubset)
TBItermcount <- nrow(TBItermsubset)
Stroketermcount <- nrow(Stroketermsubset)

#pospercent
Overalltermpercent <- (divide_by(Overalltermcount,Totalcount))*100
ADtermpercent <- (divide_by(ADtermcount,ADcount))*100
PDtermpercent <- (divide_by(PDtermcount,PDcount))*100
ALStermpercent <- (divide_by(ALStermcount,ALScount))*100
HDtermpercent <- (divide_by(HDtermcount,HDcount))*100
MStermpercent <- (divide_by(MStermcount,MScount))*100
Migrainetermpercent <-(divide_by(Migrainetermcount,Migrainecount))*100
Headachetermpercent <- (divide_by(Headachetermcount,Headachecount))*100
Epilepsytermpercent <- (divide_by(Epilepsytermcount,Epilepsycount))*100
TBItermpercent <- (divide_by(TBItermcount,TBIcount))*100
Stroketermpercent <- (divide_by(Stroketermcount,Strokecount))*100

#preceded term
Overallpreceedterm <-subset(Overallpreceed, terminationcode == "1")
ADprecedterm <- subset(ADpreceed, terminationcode == "1")
PDprecedterm<- subset(PDpreceed, terminationcode == "1")
ALSprecedterm <- subset(ALSpreceed, terminationcode == "1")
HDprecedterm <- subset(HDpreceed, terminationcode == "1")
MSprecedterm <- subset(MSpreceed, terminationcode == "1")
Migraineprecedterm <- subset(Migrainepreceed, terminationcode == "1")
Headacheprecedterm <- subset(Headachepreceed, terminationcode == "1")
Epilepsyprecedterm <- subset(Epilepsypreceed, terminationcode == "1")
TBIprecedterm <- subset(TBIpreceed, terminationcode == "1")
Strokeprecedterm <- subset(Strokepreceed, terminationcode == "1")

Overallprectermnumber <- nrow(Overallpreceedterm)
ADprectermnumber <- nrow(ADprecedterm)
PDprectermnumber <- nrow(PDprecedterm)
ALSprectermnumber  <- nrow(ALSprecedterm)
HDprectermnumber  <- nrow(HDprecedterm)
MSprectermnumber  <- nrow(MSprecedterm)
Migraineprectermnumber  <- nrow(Migraineprecedterm)
Headacheprectermnumber  <- nrow(Headacheprecedterm)
Epilepsyprectermnumber  <- nrow(Epilepsyprecedterm)
TBIprectermnumber  <- nrow(TBIprecedterm)
Strokeprectermnumber  <- nrow(Strokeprecedterm)

Overallprecedtermpercent <- (divide_by(Overallprectermnumber,Overallpreceedcount))*100
ADprecedtermpercent <- (divide_by(ADprectermnumber,ADpreceedcount))*100
PDprecedtermpercent <- (divide_by(PDprectermnumber,PDpreceedcount))*100
ALSprecedtermpercent  <- (divide_by(ALSprectermnumber,ALSpreceedcount))*100
HDprecedtermpercent <- (divide_by(HDprectermnumber,HDpreceedcount))*100
MSprecedtermpercent <- (divide_by(MSprectermnumber,MSpreceedcount))*100
Migraineprecedtermpercent <- (divide_by(Migraineprectermnumber,Migrainepreceedcount))*100
Headacheprecedtermpercent <- (divide_by(Headacheprectermnumber,Headachepreceedcount))*100
Epilepsyprecedtermpercent <- (divide_by(Epilepsyprectermnumber,Epilepsypreceedcount))*100
TBIprecedtermpercent <- (divide_by(TBIprectermnumber,TBIpreceedcount))*100
Strokeprecedtermpercent  <- (divide_by(Strokeprectermnumber,Strokepreceedcount))*100

#bypassterm
Overallbypassterm<-subset(Overallbypassandambi, terminationcode == "1")
ADbypassterm <- subset(ADbypassandambi, terminationcode == "1")
PDbypassterm<- subset(PDbypassandambi, terminationcode == "1")
ALSbypassterm <- subset(ALSbypassandambi, terminationcode == "1")
HDbypassterm <- subset(HDbypassandambi, terminationcode == "1")
MSbypassterm <- subset(MSbypassandambi, terminationcode == "1")
Migrainebypassterm <- subset(Migrainebypassandambi, terminationcode == "1")
Headachebypassterm <- subset(Headachebypassandambi, terminationcode == "1")
Epilepsybypassterm <- subset(Epilepsybypassandambi, terminationcode == "1")
TBIbypassterm <- subset(TBIbypassandambi, terminationcode == "1")
Strokebypassterm <- subset(Strokebypassandambi, terminationcode == "1")

Overallbypasstermnumber <- nrow(Overallbypassterm)
ADbypasstermnumber <- nrow(ADbypassterm)
PDbypasstermnumber <- nrow(PDbypassterm)
ALSbypasstermnumber  <- nrow(ALSbypassterm)
HDbypasstermnumber  <- nrow(HDbypassterm)
MSbypasstermnumber  <- nrow(MSbypassterm)
Migrainebypasstermnumber  <- nrow(Migrainebypassterm)
Headachebypasstermnumber  <- nrow(Headachebypassterm)
Epilepsybypasstermnumber  <- nrow(Epilepsybypassterm)
TBIbypasstermnumber  <- nrow(TBIbypassterm)
Strokebypasstermnumber  <- nrow(Strokebypassterm)

Overallbypasstermpercent <- (divide_by(Overallbypasstermnumber,Overallbypassandambicount))*100
ADbypasstermpercent <- (divide_by(ADbypasstermnumber,ADbypassandambicount))*100
PDbypasstermpercent <- (divide_by(PDbypasstermnumber,PDbypassandambicount))*100
ALSbypasstermpercent  <- (divide_by(ALSbypasstermnumber,ALSbypassandambicount))*100
HDbypasstermpercent <- (divide_by(HDbypasstermnumber,HDbypassandambicount))*100
MSbypasstermpercent <- (divide_by(MSbypasstermnumber,MSbypassandambicount))*100
Migrainebypasstermpercent <- (divide_by(Migrainebypasstermnumber,Migrainebypassandambicount))*100
Headachebypasstermpercent <- (divide_by(Headachebypasstermnumber,Headachebypassandambicount))*100
Epilepsybypasstermpercent <- (divide_by(Epilepsybypasstermnumber,Epilepsybypassandambicount))*100
TBIbypasstermpercent <- (divide_by(TBIbypasstermnumber,TBIbypassandambicount))*100
Strokebypasstermpercent  <- (divide_by(Strokebypasstermnumber,Strokebypassandambicount))*100


Indicationvector1<-c("All Indications","Alzheimer's disease","Parkinson's disease","Amyotrophic lateral sclerosis","Huntington's disease","Multiple sclerosis","Migraine","Headache","Epilepsy","TBI","Stroke")

PositivityN<- c(Overallposcount,ADposcount,PDposcount,ALSposcount,HDposcount,MSposcount,Migraineposcount,Headacheposcount,Epilepsyposcount,TBIposcount,Strokeposcount)

PositivityRate<- c(Overallpospercent,ADpospercent,PDpospercent,ALSpospercent,HDpospercent,MSpospercent,Migrainepospercent,Headachepospercent,Epilepsypospercent,TBIpospercent,Strokepospercent)

proceedposN <- c(Overallprecposnumber, ADprecposnumber, PDprecposnumber, ALSprecposnumber, HDprecposnumber,MSprecposnumber,Migraineprecposnumber,Headacheprecposnumber,Epilepsyprecposnumber,TBIprecposnumber,Strokeprecposnumber)

proceedthatwerepospercent <- c(Overallprecedpospercent, ADprecedpospercent, PDprecedpospercent, ALSprecedpospercent, HDprecedpospercent,MSprecedpospercent,Migraineprecedpospercent,Headacheprecedpospercent,Epilepsyprecedpospercent,TBIprecedpospercent,Strokeprecedpospercent)

bypassedposN<- c(Overallbypassposnumber,ADbypassposnumber,PDbypassposnumber, ALSbypassposnumber, HDbypassposnumber,MSbypassposnumber,Migrainebypassposnumber,Headachebypassposnumber,Epilepsybypassposnumber,TBIbypassposnumber, Strokebypassposnumber)

bypassedthatwerepospercent<- c(Overallbypasspospercent,ADbypasspospercent,PDbypasspospercent, ALSbypasspospercent, HDbypasspospercent,MSbypasspospercent,Migrainebypasspospercent,Headachebypasspospercent,Epilepsybypasspospercent, TBIbypasspospercent, Strokebypassposnumber)

TerminationN<- c(Overalltermcount,ADtermcount,PDtermcount,ALStermcount,HDtermcount,MStermcount,Migrainetermcount,Headachetermcount,Epilepsytermcount,TBItermcount,Stroketermcount)

TerminationRate<-c(Overalltermpercent,ADtermpercent,PDtermpercent,ALStermpercent,HDtermpercent,MStermpercent,Migrainetermpercent,Headachetermpercent,Epilepsytermpercent,TBItermpercent,Stroketermpercent)

proceedtermN <- c(Overallprectermnumber, ADprectermnumber,PDprectermnumber, ALSprectermnumber, HDprectermnumber, MSprectermnumber, Migraineprectermnumber, Headacheprectermnumber, Epilepsyprectermnumber, TBIprectermnumber, Strokeprectermnumber)

proceedthatweretermpercent <- c(Overallprecedtermpercent, ADprecedtermpercent,PDprecedtermpercent, ALSprecedtermpercent, HDprecedtermpercent, MSprecedtermpercent, Migraineprecedtermpercent, Headacheprecedtermpercent, Epilepsyprecedtermpercent, TBIprecedtermpercent, Strokeprecedtermpercent)

bypassedtermN<- c(Overallbypasstermnumber,ADbypasstermnumber,PDbypasstermnumber, ALSbypasstermnumber, HDbypasstermnumber,MSbypasstermnumber,Migrainebypasstermnumber,Headachebypasstermnumber,Epilepsybypasstermnumber, TBIbypasstermnumber, Strokebypasstermnumber)

bypassedthatweretermpercent<- c(Overallbypasstermpercent,ADbypasstermpercent,PDbypasstermpercent, ALSbypasstermpercent, HDbypasstermpercent,MSbypasstermpercent,Migrainebypasstermpercent,Headachebypasstermpercent,Epilepsybypasstermpercent, TBIbypasstermpercent, Strokebypasstermpercent)

positivityandtermtable <- data.frame(Indication=rep(Indicationvector1),
                 Positivity_N=rep(PositivityN),                 
                 Positivity_Rate=rep(PositivityRate),
                 PrecPositivity_N =rep(proceedposN),
                 Positivity_Rate_when_proceeded_by_P2=rep(proceedthatwerepospercent),
                 BypassPositivity_N =rep(bypassedposN),
                 Positivity_Rate_when_bypassed=rep(bypassedthatwerepospercent),
                 Termination_N=rep(TerminationN), 
                 Termination_Rate=rep(TerminationRate),
                 PrecTermination_N=rep(proceedtermN),
                 Termination_Rate_when_proceeded=rep(proceedthatweretermpercent),
                 BypassTermination_N=rep(bypassedtermN),
                 Termination_Rate_when_bypassed=rep(bypassedthatweretermpercent)
                 )

print(positivityandtermtable)
write.table(positivityandtermtable)

```


```{r, echo=FALSE, message = FALSE, warning=FALSE, include=FALSE}
#for SMD&for WdAe
#Patient benefit was analyzed with a random-effects meta-analysis comparing the standardized mean difference (SMD)29 in change from baseline between the treatment and placebo arms within each indication. All measures of variance were converted to SDs using the methods outlined in the Cochrane Handbook,30 and multiple treatment arms in the same trial were pooled using inverse variance weighting.31 Patient risk was analyzed with random-effects meta-analyses to calculate risk ratios (RRs) of SAEs and WAEs between the treatment and placebo arms. A correction factor of 0.5 was added to SAE and WAE values for trials that reported zero event rates in both arms to allow these trials to contribute to the overall pooled effect size and confidence intervals (CIs).33 

#It should be noted that the SMD method does not correct for differences in the direction of the scale. If some scales increase with disease severity (for example, a higher score indicates more severe depression) whilst others decrease (a higher score indicates less severe depression), it is essential to multiply the mean values from one set of studies by –1 (or alternatively to subtract the mean from the maximum possible value for the scale) to ensure that all the scales point in the same direction, before standardization. Any such adjustment should be described in the statistical methods section of the review. The SD does not need to be modified.

#seperate into indications-only these are included for now--check again when new data is added
#Alzheimer’s disease, Parkinson’s disease, Migraine
#check other indications 
neurobypass1 <- read_csv("cleanforcoding.csv")

neurobypass1$preceeded <- factor(neurobypass1$preceeded , 
                                       labels = c("Bypassed",
                                                  "Did not bypass"))

SMDsubset <- subset(neurobypass1, Is_there_a_SMD == "1")

ADsubsetSMD <- subset(SMDsubset, indication == "AD")
PDsubsetSMD <- subset(SMDsubset, indication == "PD")
ALStermsubsetSMD <- subset(SMDsubset, indication == "ALS")
MigrainetermsubsetSMD <- subset(SMDsubset, indication == "Migrane")

ADSMDpool <- ADsubsetSMD %>%
  mutate(SMD_SE =  (abs(log(abs(upperCI))-log(abs(lowerCI))))/(abs(qnorm((1-0.95)/2))*2))

PDSMDpool <- PDsubsetSMD %>%
  mutate(SMD_SE =  (abs(log(abs(upperCI))-log(abs(lowerCI))))/(abs(qnorm((1-0.95)/2))*2))
      
ADSMDpooling <- metagen(
  TE=log(Mean_difference),
  seTE=SMD_SE,
  data = ADSMDpool,
  sm = "SMD",
  comb.fixed = FALSE,
  comb.random = TRUE,
  subgroup = preceeded,
  random = T,
  fixed = F,
  tau.common = F,
  method.tau = "SJ", # # "DL", "PM", "REML", "ML", "HS", "SJ", "HE", or "EB"
  adhoc.hakn = "se",
)
summary(ADSMDpooling)

PDSMDpooling <- metagen(
  TE=log(Mean_difference),
  seTE=SMD_SE,
  data = PDSMDpool,
  sm = "SMD",
  comb.fixed = FALSE,
  comb.random = TRUE,
  subgroup = preceeded,
  random = T,
  fixed = F,
  tau.common = F,
  method.tau = "SJ", # # "DL", "PM", "REML", "ML", "HS", "SJ", "HE", or "EB"
  adhoc.hakn = "se",
)
summary(PDSMDpooling)

#wdAE

WdAEsubset <- subset(neurobypass1, Is_there_a_WDAE == "1")

ADsubsetWdAE <- subset(WdAEsubset, indication == "AD")
PDsubsetWdAE <- subset(WdAEsubset, indication == "PD")
ALSsubsetWdAE <- subset(WdAEsubset, indication == "ALS")
MigrainesubsetWdAE <- subset(WdAEsubset, indication == "Migrane")


ADwdAEpooling <- metabin(
  event.e=withdrawals_in_exparm,
  n.e=Nexp_arm,
  event.c=withdrawals_in_contarm,
  n.c=Ncont_arm,
  studlab = nct_id,
  data = ADsubsetWdAE, 
  subgroup = preceeded,
  comb.fixed = FALSE,
  fixed = F,
  random = T,
  method.tau = "PM", 
  adhoc.hakn = "se",
)
summary (ADwdAEpooling)

PDwdAEpooling <- metabin(
  event.e=withdrawals_in_exparm,
  n.e=Nexp_arm,
  event.c=withdrawals_in_contarm,
  n.c=Ncont_arm,
  studlab = nct_id,
  data = PDsubsetWdAE, 
  subgroup = preceeded,
  comb.fixed = FALSE,
  fixed = F,
  random = T,
  method.tau = "PM", 
  adhoc.hakn = "se",
)
summary (PDwdAEpooling)

ALSwdAEpooling <- metabin(
  event.e=withdrawals_in_exparm,
  n.e=Nexp_arm,
  event.c=withdrawals_in_contarm,
  n.c=Ncont_arm,
  studlab = nct_id,
  data = ALSsubsetWdAE, 
  subgroup = preceeded,
  comb.fixed = FALSE,
  fixed = F,
  random = T,
  method.tau = "PM", 
  adhoc.hakn = "se",
)

MigrainewdAEpooling <- metabin(
  event.e=withdrawals_in_exparm,
  n.e=Nexp_arm,
  event.c=withdrawals_in_contarm,
  n.c=Ncont_arm,
  studlab = nct_id,
  data = MigrainesubsetWdAE, 
  subgroup = preceeded,
  comb.fixed = FALSE,
  fixed = F,
  random = T,
  method.tau = "PM", 
  adhoc.hakn = "se",
)
summary (MigrainewdAEpooling)

#forestplots

labels1 <- c("Preceded", "Bypass")
labels2 <- c("AD", "PD")
labels3 <- c("AD", "PD","ALS", "Migraine")

smdnb <- metabind(ADSMDpooling,PDSMDpooling, name = labels2)
waenb <- metabind(ADwdAEpooling,PDwdAEpooling, ALSwdAEpooling, MigrainewdAEpooling, name = labels3)

pdf("SMD.pdf",10,8)
forest(smdnb, xlim=c(0.55,1.5), print.subgroup.labels = T,label.left =              "<-------------
Favours exp arm",label.right = "--------->
Favours control arm")
dev.off()

pdf("WdAeall.pdf",10,8)
forest(waenb, xlim=c(0.75,1.5), print.subgroup.labels = T,label.left =              "<---------
Favours exp arm", label.right = "------------>
Favours control arm")
dev.off()

```


```{r, echo=FALSE, message = FALSE, warning=FALSE, include=FALSE}
#patientnumbers and timing
library(tidyverse)

#nctids <- read_csv("~/Projects/Neurobypass/2023-01-25-hannah-ncts.csv") %>%
    #select(nctid),

#nctids_string <- pull(nctids) %>%
    #paste(collapse="%20OR%20"),

#trials <- read_csv(paste0("https://clinicaltrials.gov/ct2/results/download_fields?down_count=10000&down_flds=all&down_fmt=csv&term=", nctids_string, "&flds=a&flds=b&flds=g&flds=o&flds=u")),

#trials <- trials %>%
    #mutate(found = `NCT Number` %in% nctids$nctid) %>%
   # filter(found) %>%
   # select(! found),

#trials %>%
    #write_csv("~/Projects/Neurobypass/2023-01-25-hannah-trial-data.csv"),

summary(neurobypass$Enrollment)
summary(neurobypass$time_difference) 

Onlyphase3<-subset(neurobypass, phase== "Phase_3")

#need to add positivity from overall document
Onlyphase3nonpos<-subset(Onlyphase3, positivityofP3!="Positive")
summary(Onlyphase3nonpos$Enrollment)
summary(Onlyphase3nonpos$time_difference)


Onlyphase3term<-subset(Onlyphase3, terminationcode=="1")
summary(Onlyphase3term$Enrollment)
summary(Onlyphase3term$time_difference)



```

```{r, echo=FALSE, message = FALSE, warning=FALSE, include=FALSE}
#Fishertests
table((positivityofP3$neurobypass, termination$`P2 not Bypass`)

Overalltermfisher <- fisher.test()
ADtermfisher <- fisher.test()
PDtermfisher <- fisher.test()
ALStermfisher <- fisher.test()
HDtermfisher <- fisher.test()
MStermfisher <-fisher.test()
Migrainetermfisher<- fisher.test()
Headachetermfisher<- fisher.test()
Epilepsytermfisher <- fisher.test()
TBItermfisher <- fisher.test()
Stroketermfisher  <- fisher.test()

Overallposfisher <- fisher.test()
ADposfisher <- fisher.test()
PDposfisher <- fisher.test()
ALSposfisher <- fisher.test()
HDposfisher <- fisher.test()
MSposfisher <-fisher.test()
Migraineposfisher<- fisher.test()
Headacheposfisher<- fisher.test()
Epilepsyposfisher <- fisher.test()
TBIposfisher <- fisher.test()
Strokeposfisher  <- fisher.test()

Overalltermpvalue <- Overalltermfisher$p.value
ADtermpvalue <- ADtermfisher$p.value
PDtermpvalue <- PDtermfisher$p.value
ALStermpvalue <- ALStermfisher$p.value
HDtermpvalue <- HDtermfisher$p.value
MStermpvalue <- MStermfisher$p.value
Migrainetermpvalue<- Migrainetermfisher$p.value
Headachetermpvalue<- Headachetermfisher$p.value
Epilepsytermpvalue <- Epilepsytermfisher$p.value
TBItermpvalue <- TBItermfisher$p.value
Stroketermpvalue  <- Stroketermfisher$p.value

Overallpospvalue <- Overallposfisher$p.value
ADpospvalue <- ADposfisher$p.value
PDpospvalue <- PDposfisher$p.value
ALSpospvalue <- ALSposfisher$p.value
HDpospvalue <- HDposfisher$p.value
MSpospvalue <- MSposfisher$p.value
Migrainepospvalue<- Migraineposfisher$p.value
Headachepospvalue<- Headacheposfisher$p.value
Epilepsypospvalue <- Epilepsyposfisher$p.value
TBIpospvalue <- TBIposfisher$p.value
Strokepospvalue  <- Strokeposfisher$p.value

pospvalues<- c(Overallpospvalue, ADpospvalue, PDpospvalue, ALSpospvalue, HDpospvalue, MSpospvalue, Migrainepospvalue, Headachepospvalue, Epilepsypospvalue, TBIpospvalue, Strokepospvalue)
termpvalues <- c(Overalltermpvalue, ADtermpvalue, PDtermpvalue, ALStermpvalue, HDtermpvalue, MStermpvalue, Migrainetermpvalue, Headachetermpvalue,
```
#write text 
#write variables 
Results Section 

Sample
After applying our inclusion criteria to the downloaded trials, **`r round(Totalcount, 2)`** trials were included in our analysis. Of these trials, **`r round(ADcount, 2)`** trials were in Alzheimer's disease", **`r round(PDcount, 2)`** Parkinson disease,**`r round(ALScount, 2)`** Amyotrophic lateral sclerosis, **`r round(HDcount, 2)`** Huntingtons disease,**`r round(MScount, 2)`** Multiple sclerosis ,**`r round(Migrainecount, 2)`** Migraine,**`r round(Headachecount, 2)`** Headache,**`r round(Epilepsycount, 2)`** Epilepsy,**`r round(TBIcount, 2)`** TBI ,**`r round(Strokecount, 2)`** Stroke. The average sample size was x and x (TABLE 1). 

Prevalence
In our sample, we found that **`r round(Totalpreceededcount, 2)`** were proceeded by a positive P2 trial ,**`r round(Totalambigiouscount, 2)`** were preceded by ambigious evidence, and **`r round(Totalbypasscount, 2)`** lacked any prior evidence that fulfilled our criteria. Overall positivity numbers? Prevalence of bypassing and P3 positivity is broken down into disease areas in Table 1.  Compare indications 